<!DOCTYPE html>
<html lang="en">
	<head>
        {% load static %}
		<meta charset="utf-8" />
		<title>控制台</title>
		<link href="{% static 'css/admin_css/bootstrap.min.css' %}" rel="stylesheet" />
		<link rel="stylesheet" href="{% static 'css/admin_css/font-awesome.min.css' %}" />
		<script src="{% static 'js/admin_js/jquery-2.0.3.min.js' %}"></script>
		<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Open+Sans:400,300" />
		<link rel="stylesheet" href="{% static 'css/admin_css/ace.min.css' %}" />
		<link rel="stylesheet" href="{% static 'css/admin_css/ace-rtl.min.css' %}" />
		<link rel="stylesheet" href="{% static 'css/admin_css/ace-skins.min.css' %}" />
		<script src="{% static 'js/admin_js/echarts.common.min.js' %}"></script>
		<script src="{% static 'js/admin_js/ace-extra.min.js' %}"></script>

	</head>

	<body>
		<div class="navbar navbar-default" id="navbar">
			<script type="text/javascript">
				try {
					ace.settings.check('navbar', 'fixed')
				} catch (e) {}
			</script>

			<div class="navbar-container" id="navbar-container">
				<div class="navbar-header pull-left">
					<a href="./index.html" class="navbar-brand">
						<small>
							<i class="icon-leaf"></i>
							学情管理平台
						</small>
					</a><!-- /.brand -->
				</div><!-- /.navbar-header -->

				<div class="navbar-header pull-right" role="navigation">
					<ul class="nav ace-nav">
						
						<li class="purple">
							<a class="dropdown-toggle" href="./inbox.html">
								<i class="icon-bell-alt icon-animated-bell"></i>
								<span class="badge badge-important">8</span>
							</a>

						</li>


						<li class="light-blue">
							<a data-toggle="dropdown" href="#" class="dropdown-toggle">
								<img class="nav-user-photo" src="{% static 'avatars/user.jpg' %}" alt="Jason's Photo" />
								<span class="user-info">
									<small>欢迎光临,</small>
									Hao
								</span>

								<i class="icon-caret-down"></i>
							</a>

							<ul class="user-menu pull-right dropdown-menu dropdown-yellow dropdown-caret dropdown-close">

								<li>
									<a href="../profile.html">
										<i class="icon-user"></i>
										个人资料
									</a>
								</li>

								<li class="divider"></li>

								<li>
									<a href="../others/login.html">
										<i class="icon-off"></i>
										退出
									</a>
								</li>
							</ul>
						</li>
					</ul><!-- /.ace-nav -->
				</div><!-- /.navbar-header -->
			</div><!-- /.container -->
		</div>

		<div class="main-container" id="main-container">
			<script type="text/javascript">
				try {
					ace.settings.check('main-container', 'fixed')
				} catch (e) {}
			</script>

			<div class="main-container-inner">
				<a class="menu-toggler" id="menu-toggler" href="#">
					<span class="menu-text"></span>
				</a>

				<div class="sidebar" id="sidebar">
					<script type="text/javascript">
						try {
							ace.settings.check('sidebar', 'fixed')
						} catch (e) {}
					</script>

					<div class="sidebar-shortcuts" id="sidebar-shortcuts">
						<!-- <div class="sidebar-shortcuts-large" id="sidebar-shortcuts-large">
							<button class="btn btn-success">
								<i class="icon-signal"></i>
							</button>

							<button class="btn btn-info">
								<i class="icon-pencil"></i>
							</button>

							<button class="btn btn-warning">
								<i class="icon-group"></i>
							</button>

							<button class="btn btn-danger">
								<i class="icon-cogs"></i>
							</button>
						</div> -->

						<div class="sidebar-shortcuts-mini" id="sidebar-shortcuts-mini">
							<span class="btn btn-success"></span>

							<span class="btn btn-info"></span>

							<span class="btn btn-warning"></span>

							<span class="btn btn-danger"></span>
						</div>
					</div><!-- #sidebar-shortcuts -->

					<ul class="nav nav-list">
						<li class="active">
							<a href="{% url 'admindex' %}">
								<i class="icon-dashboard"></i>
								<span class="menu-text"> 学情管理控制台 </span>
							</a>
						</li>


						<li class="active">
							<a href="{% url 'admindex' %}">
								<i class="icon-dashboard"></i>
								<span class="menu-text"> 主页 </span>
							</a>
						</li>
						<li>
							<a href="#">
								<i class="icon-list"></i>
								<span class="menu-text"> 毕业审核 </span>
							</a>
						</li>
						<li>
							<a href="{% url 'st_like' %}" class="dropdown-toggle">
								<i class="icon-list"></i>
								<span class="menu-text"> 学情分析 </span>

							</a>

						</li>
						<li>
							<a href="{% url 'warm' %}" class="dropdown-toggle">
								<i class="icon-list"></i>
								<span class="menu-text"> 学情预警 </span>

							</a>
						</li>
						<li>
							<a href="{% url 'admcred' %}">
								<i class="icon-list"></i>
								<span class="menu-text"> 学分管理 </span>
							</a>
						</li>

						<li>
							<a href="{% url 'hplan' %}" class="dropdown-toggle">
								<i class="icon-list"></i>
								<span class="menu-text"> 助学进度 </span>

							</a>

						</li>
						<li>
							<a href="{% url 'adduser' %}" class="dropdown-toggle">
								<i class="icon-list"></i>
								<span class="menu-text"> 添加用户 </span>
							</a>

						</li>
						<li>
							<a href="{% url 'assit' %}" class="dropdown-toggle">
								<i class="icon-list"></i>
								<span class="menu-text"> 帮扶计划 </span>

							</a>

						</li>

						<li>
							<a href="{% url 'tj' %}" class="dropdown-toggle">
								<i class="icon-list"></i>
								<span class="menu-text"> 统计分析 </span>

							</a>

						</li>

						<li>
							<a href="{% url 'associate' %}" class="dropdown-toggle">
								<i class="icon-list"></i>
								<span class="menu-text"> 关联分析 </span>

							</a>

						</li>

					</ul>

					<div class="sidebar-collapse" id="sidebar-collapse">
						<i class="icon-double-angle-left" data-icon1="icon-double-angle-left" data-icon2="icon-double-angle-right"></i>
					</div>

					<script type="text/javascript">
						try {
							ace.settings.check('sidebar', 'collapsed')
						} catch (e) {}
					</script>
				</div>

				<div class="main-content">
					<div class="breadcrumbs" id="breadcrumbs">
						<script type="text/javascript">
							try {
								ace.settings.check('breadcrumbs', 'fixed')
							} catch (e) {}
						</script>

						<ul class="breadcrumb">
							<li>
								<i class="icon-home home-icon"></i>
								<a href="{% url 'admindex' %}">首页</a>
							</li>
							<li class="active">统计分析</li>
						</ul><!-- .breadcrumb -->

						<div class="nav-search" id="nav-search">
							<form class="form-search">
								<span class="input-icon">
									<input type="text" placeholder="Search ..." class="nav-search-input" id="nav-search-input" autocomplete="off" />
									<i class="icon-search nav-search-icon"></i>
								</span>
							</form>
						</div><!-- #nav-search -->
					</div>

					<div class="page-content">
						

						<div class="row">
							<div class="col-xs-12">
								<!-- PAGE CONTENT BEGINS -->

								<div class="row">
									<div class="col-sm-10" style="position: relative">
										<div class="widget-box">
											<div class="widget-header widget-header-flat widget-header-small">
												<h5>
													<i class="icon-signal"></i>
													统计分析
												</h5>

												<div class="widget-toolbar no-border">

													<button class="btn btn-minier btn-primary dropdown-toggle" data-toggle="dropdown">
													选择学院
														<i class="icon-angle-down icon-on-right bigger-110"></i>
													</button>
                                                        <ul class="dropdown-menu pull-right dropdown-125 dropdown-lighter dropdown-caret" id="all_collage">
                                                                <li class="active">
                                                                <a href="{% url 'tj' %}" class="blue">
                                                                    <i class="icon-caret-right bigger-110">&nbsp;</i>
                                                                    全校
                                                                </a>
                                                                 </li>
                                                            {% for collage in collage_count %}
                                                                <li>
                                                                <a href="#">
                                                                    <i class="icon-caret-right bigger-110 invisible">&nbsp;</i>
                                                                    {{ collage }}
                                                                </a>
                                                                </li>
                                                            {% endfor %}
                                                        </ul>
                                                        {% csrf_token %}
												</div>
											</div>

											<div class="widget-body">
												<div class="col-sm-6">
													<div class="widget-main">
														<div id="piechart-placeholder"  style="height:280px;"></div>
													</div>

													<div class="widget-main">
														<div id="piechart-placeholder-two" style="height:280px;"></div>
													</div>
												</div>
												<div class="col-sm-6">
													<div class="widget-main">
														<div id="piechart-placeholder-tree"  style="height:280px;"></div>
													</div>

													<div class="widget-main">
														<div id="piechart-placeholder-foure" style="height:280px;"></div>
													</div>
												</div>
											</div>



										</div>

									</div>
									<div class="col-xs-2">
										<div style="width: 180px;height:400px;background: rgba(240,240,240,.5);border: 1px solid #333;overflow:hidden;box-sizing:border-box;border-radius: 3px;position: fixed;top: 150px;right: 20px;">
											<div class="widget-main">
												<p id="m_or_c" style="width: 100%;height: 25px;line-height: 25px;background: rgba(111,111,111,.5);margin: 0;text-align: center;">{{ collage_table.0 }}</p>
												<p id="m_or_c_name" style="width: 100%;height: 25px;line-height: 25px;background: rgba(255,255,255,.5);text-align: center;">{{ collage_table.1 }}</p>
												<p style="width: 100%;height: 25px;line-height: 25px;background: rgba(111,111,111,.5);margin: 0;text-align: center;">男/女人数</p>
												<p id="gender" style="width: 100%;height: 25px;line-height: 25px;background: rgba(255,255,255,.5);text-align: center;">{{ gender_table }}</p>
												<p style="width: 100%;height: 25px;line-height: 25px;background: rgba(111,111,111,.5);margin: 0;text-align: center;">专业个数</p>
												<p id="major_count" style="width: 100%;height: 25px;line-height: 25px;background: rgba(255,255,255,.5);text-align: center;">{{ major_table }}</p>
												<p style="width: 100%;height: 25px;line-height: 25px;background: rgba(111,111,111,.5);margin: 0;text-align: center;">民族个数</p>
												<p id="nation_count" style="width: 100%;height: 25px;line-height: 25px;background: rgba(255,255,255,.5);text-align: center;">{{ nation_table }}</p>
												<p style="width: 100%;height: 25px;line-height: 25px;background: rgba(111,111,111,.5);margin: 0;text-align: center;">籍贯个数</p>
												<p id="native_p_count" style="width: 100%;height: 25px;line-height: 25px;background: rgba(255,255,255,.5);text-align: center;">{{ native_place_table }}</p>

											</div>

										</div>
									</div>





								</div>
								<!-- PAGE CONTENT ENDS -->
							</div><!-- /.col -->
						</div><!-- /.row -->
					</div><!-- /.page-content -->
				</div><!-- /.main-content -->

				<div class="ace-settings-container" id="ace-settings-container">
					<div class="btn btn-app btn-xs btn-warning ace-settings-btn" id="ace-settings-btn">
						<i class="icon-cog bigger-150"></i>
					</div>

					<div class="ace-settings-box" id="ace-settings-box">
						<div>
							<div class="pull-left">
								<select id="skin-colorpicker" class="hide">
									<option data-skin="default" value="#438EB9">#438EB9</option>
									<option data-skin="skin-1" value="#222A2D">#222A2D</option>
									<option data-skin="skin-2" value="#C6487E">#C6487E</option>
									<option data-skin="skin-3" value="#D0D0D0">#D0D0D0</option>
								</select>
							</div>
							<span>&nbsp; 选择皮肤</span>
						</div>

						<div>
							<input type="checkbox" class="ace ace-checkbox-2" id="ace-settings-navbar" />
							<label class="lbl" for="ace-settings-navbar"> 固定导航条</label>
						</div>

						<div>
							<input type="checkbox" class="ace ace-checkbox-2" id="ace-settings-sidebar" />
							<label class="lbl" for="ace-settings-sidebar"> 固定滑动条</label>
						</div>

						<div>
							<input type="checkbox" class="ace ace-checkbox-2" id="ace-settings-breadcrumbs" />
							<label class="lbl" for="ace-settings-breadcrumbs">固定面包屑</label>
						</div>

						<div>
							<input type="checkbox" class="ace ace-checkbox-2" id="ace-settings-rtl" />
							<label class="lbl" for="ace-settings-rtl">切换到左边</label>
						</div>

						<div>
							<input type="checkbox" class="ace ace-checkbox-2" id="ace-settings-add-container" />
							<label class="lbl" for="ace-settings-add-container">
								切换窄屏
								<b></b>
							</label>
						</div>
					</div>
				</div><!-- /#ace-settings-container -->
			
			</div><!-- /.main-container-inner -->

			<!-- <a href="#" id="btn-scroll-up" class="btn-scroll-up btn btn-sm btn-inverse">
				<i class="icon-double-angle-up icon-only bigger-110"></i>
			</a> -->
		</div><!-- /.main-container -->

		<!-- basic scripts -->

		<!--[if !IE]> -->



		<div class="dlog-box" style="display: none;width: 100%;height: 100%;background: rgba(0,0,0,.4);position: fixed;top: 0;left: 0;z-index:99999;">
			<div class="dlog-box-in" style="width: 60%;height: 60%;background: #fff;position: absolute;top: 20%;left: 20%;border-radius: 5px;">
				<div class="dlog-box-in-title" style="width: 100%;height: 35px;border-bottom:1px solid #ccc;box-sizing: border-box;">
					<span style="float: left;font-weight: bold;line-height: 35px;margin:0 15px;">数据详情</span>
					<i class="glyphicon glyphicon-remove" style="color: orangered;float: right;margin: 7px 10px;font-size: 18px;" onclick="Close()"></i>
				</div>
				<div class="dlog-conctent" style="height: calc(100% - 35px);padding: 10px;">

				</div>
			</div>
		</div>



		<!-- <![endif]-->

		<script src="{% static 'js/admin_js/jquery-2.0.3.min.js' %}"></script>

		<!-- <![endif]-->

		<!--[if IE]>
<script src="{% static 'js/admin_js/jquery-1.10.3.min.js' %}"></script>
<![endif]-->

		<!--[if !IE]> -->

		<script type="text/javascript">
			window.jQuery || document.write("<script src='{% static 'js/admin_js/jquery-2.0.3.min.js' %}'>" + "<" + "script>");
		</script>

		<!-- <![endif]-->

		<!--[if IE]>
<script type="text/javascript">
 window.jQuery || document.write("<script src='{% static 'js/admin_js/jquery-1.10.2.min.js' %}'>"+"<"+"script>");
</script>
<![endif]-->

		<script type="text/javascript">
			if ("ontouchend" in document) document.write("<script src='{% static 'js/admin_js/jquery.mobile.custom.min.js' %}'>" + "<" +
				"script>");
		</script>
		<script src="{% static 'js/admin_js/bootstrap.min.js' %}"></script>
		<script src="{% static 'js/admin_js/typeahead-bs2.min.js' %}"></script>

		<!-- page specific plugin scripts -->

		<!--[if lte IE 8]>
		  <script src="{% static 'js/admin_js/excanvas.min.js' %}"></script>
		<![endif]-->

		<script src="{% static 'js/admin_js/jquery-ui-1.10.3.custom.min.js' %}"></script>
		<script src="{% static 'js/admin_js/jquery.ui.touch-punch.min.js' %}"></script>
		<script src="{% static 'js/admin_js/jquery.slimscroll.min.js' %}"></script>
		<script src="{% static 'js/admin_js/jquery.easy-pie-chart.min.js' %}"></script>
		<script src="{% static 'js/admin_js/jquery.sparkline.min.js' %}"></script>
		<script src="{% static 'js/admin_js/flot/jquery.flot.min.js' %}"></script>
		<script src="{% static 'js/admin_js/flot/jquery.flot.pie.min.js' %}"></script>
		<script src="{% static 'js/admin_js/flot/jquery.flot.resize.min.js' %}"></script>
		<!-- ace scripts -->

		<script src="{% static 'js/admin_js/ace-elements.min.js' %}"></script>
		<script src="{% static 'js/admin_js/ace.min.js' %}"></script>

		<!-- inline scripts related to this page -->

{#        <script src="{% static 'js/admin_js/bootstrap.min.js' %}"></script>#}
		<script src="{% static 'js/admin_js/typeahead-bs2.min.js' %}"></script>

		<!-- inline scripts related to this page -->
		

		<script>
             //性别统计
            let  gender_name = [];
            let gender_count = [];

            let gender={{ gender|safe }};
             for(let key in gender){
                 gender_name.push(key);
                 gender_count.push({'value':gender[key],'name':key});
             }
             //民族统计
            let  naion_name = [];
            let nation_count = [];

            let nation={{ nation|safe }};
             for(let key in nation){
                 naion_name.push(key);
                 nation_count.push(nation[key]);
             }

            //籍贯统计
            let  native_place_name = [];
            let native_place_count = [];

            let native_place={{ native_place|safe }};
             for(let key in native_place){
                 native_place_name.push(key);
                 native_place_count.push(native_place[key]);
             }
             //专业统计
            let  major_name = [];
            let major_count = [];

            let major={{ major|safe }};
             for(let key in major){
                 major_name.push(key);
                 major_count.push(major[key]);
             }


			// 基于准备好的dom，初始化echarts实例
			var myChart = echarts.init(document.getElementById('piechart-placeholder'));
			// 基于准备好的dom，初始化echarts实例
			var myChart2 = echarts.init(document.getElementById('piechart-placeholder-two'));
			var myChart3 = echarts.init(document.getElementById('piechart-placeholder-tree'));
			var myChart4 = echarts.init(document.getElementById('piechart-placeholder-foure'));

			myChart2.on('click', function (param) {
//				console.log(param);//这里根据param填写你的跳转逻辑
				$(".dlog-box").css({ "display": "block","transition":" all 1s"  });

				$(".dlog-box-in-title span").text("专业分布详情");
//			请求来的数据自己组装    格式如下

				let datahtmls = `



				<table border="1" style="width: 100%;">
					<thead>
						<tr>
							<th>专业</th>
							<th>人数</th>
							<!--<th>${param.data.name}</th>-->
							<!--<th>${param.data.name} </th>-->
						</tr>
					</thead>
					<tbody>
						<tr>
							<td>专业1</td>
							<td>30</td>
							<!--<td>基础公共课</td>-->
							<!--<td>${param.data.value}</td>-->
						</tr>
						<tr>
							<td>专业2</td>
							<td>10</td>
							<!--<td>基础公共课</td>-->
							<!--<td>${param.data.value}</td>-->
						</tr>

					</tbody>
				</table>



			`

				$(".dlog-conctent").html(datahtmls);
			});


			myChart3.on('click', function (param) {
//				console.log(param);//这里根据param填写你的跳转逻辑
				$(".dlog-box").css({ "display": "block","transition":" all 1s"  });

				$(".dlog-box-in-title span").text("民族分布详情");
//			请求来的数据自己组装    格式如下

				let datahtmls = `



				<table border="1" style="width: 100%;">
					<thead>
						<tr>
							<th>民族</th>
							<th>人数</th>
							<!--<th>${param.data.name}</th>-->
							<!--<th>${param.data.name} </th>-->
						</tr>
					</thead>
					<tbody>
						<tr>
							<td>民族1</td>
							<td>30</td>
							<!--<td>基础公共课</td>-->
							<!--<td>${param.data.value}</td>-->
						</tr>
						<tr>
							<td>民族2</td>
							<td>10</td>
							<!--<td>基础公共课</td>-->
							<!--<td>${param.data.value}</td>-->
						</tr>

					</tbody>
				</table>



			`

				$(".dlog-conctent").html(datahtmls);
			});


			myChart4.on('click', function (param) {
//				console.log(param);//这里根据param填写你的跳转逻辑
				$(".dlog-box").css({ "display": "block","transition":" all 1s"  });

				$(".dlog-box-in-title span").text("籍贯分布详情");
//			请求来的数据自己组装    格式如下

				let datahtmls = `



				<table border="1" style="width: 100%;">
					<thead>
						<tr>
							<th>籍贯</th>
							<th>人数</th>
							<!--<th>${param.data.name}</th>-->
							<!--<th>${param.data.name} </th>-->
						</tr>
					</thead>
					<tbody>
						<tr>
							<td>籍贯1</td>
							<td>30</td>
							<!--<td>基础公共课</td>-->
							<!--<td>${param.data.value}</td>-->
						</tr>
						<tr>
							<td>籍贯2</td>
							<td>10</td>
							<!--<td>基础公共课</td>-->
							<!--<td>${param.data.value}</td>-->
						</tr>

					</tbody>
				</table>



			`

				$(".dlog-conctent").html(datahtmls);
			});



			// 指定图表的配置项和数据
			var option1 = {
//				图例标题    通过返回数据更改    不写死
				title: {
					text: '男女比例',
					// subtext: '纯属虚构',
					x: 'center'
				},
				tooltip: {
					trigger: 'item',
					formatter: "{a} <br/>{b} : {c} ({d}%)"
				},

				legend: {
					orient: 'vertical',
					x: 'left',
//					图例选项  通过返回数据组装更改    不写死
					data: gender_name,
				},
//
				calculable: true,
//				通过返回数据组装更改    不写死
				series: [{
					name: '专业学分',
					type: 'pie',
					radius: '55%',
					center: ['50%', '60%'],
					data: gender_count,
				}]
			};

			var option2 = {
				title: {
					text: '专业分布图',
					// subtext: '纯属虚构',
					x: 'center'
				},
				color: ['#3398DB'],
				tooltip : {
					trigger: 'axis',
					axisPointer : {            // 坐标轴指示器，坐标轴触发有效
						type : 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
					}
				},
				grid: {
					left: '3%',
					right: '4%',
					bottom: '3%',
					containLabel: true
				},
				xAxis : [
					{
						type : 'category',
						data : major_name,
						axisTick: {
							alignWithLabel: true
						}
					}
				],
				yAxis : [
					{
						name:'人数',
						type : 'value'
					}
				],
				series : [
					{
						name:'人数',
						type:'bar',
						barWidth: '60%',
						data:major_count,
					}
				]
			};

			var option3 = {
				title: {
					text: '民族分布图',
					// subtext: '纯属虚构',
					x: 'center'
				},
				color: ['#3398DB'],
				tooltip : {
					trigger: 'axis',
					axisPointer : {            // 坐标轴指示器，坐标轴触发有效
						type : 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
					}
				},
				grid: {
					left: '3%',
					right: '4%',
					bottom: '3%',
					containLabel: true
				},
				xAxis : [
					{
						type : 'category',
						data : naion_name,
						axisTick: {
							alignWithLabel: true
						}
					}
				],
				yAxis : [
					{
						name:'人数',
						type : 'value'
					}
				],
				series : [
					{
						name:'人数',
						type:'bar',
						barWidth: '60%',
						data:nation_count
					}
				]
			};

			var option4 = {
				title: {
					text: '籍贯分布图',
					// subtext: '纯属虚构',
					x: 'center'
				},
				color: ['#3398DB'],
				tooltip : {
					trigger: 'axis',
					axisPointer : {            // 坐标轴指示器，坐标轴触发有效
						type : 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
					}
				},
				grid: {
					left: '3%',
					right: '4%',
					bottom: '3%',
					containLabel: true
				},
				xAxis : [
					{
						type : 'category',
						data : native_place_name,
						axisTick: {
							alignWithLabel: true
						}
					}
				],
				yAxis : [
					{
						name:'人数',
						type : 'value'
					}
				],
				series : [
					{
						name:'人数',
						type:'bar',
						barWidth: '60%',
						data:native_place_count,
					}
				]
			};
			
			// 使用刚指定的配置项和数据显示图表。
			myChart.setOption(option1);
			// 使用刚指定的配置项和数据显示图表。
			myChart2.setOption(option2);
			myChart3.setOption(option3);
			myChart4.setOption(option4);


//			myChart3.on('click', function (param) {
//				console.log(param.data);//这里根据param填写你的跳转逻辑
//				window.location.href = './tables.html'
//			});
			
		</script>

        <script>
             $(function(){
                {# 专业 #}
              $("ul li").click(function(){

                  let selectValue = $(this).text();
                   $.ajax({
                        url:"{% url 'tjcollage' %}",
                        data:{"collage":selectValue,'csrfmiddlewaretoken':$('[name="csrfmiddlewaretoken"]').val()},
                        cache:"false",
                        async:false,
                        dataType:"json",
                        type:"post",
                        success:function(data){
                            //data是json类型
                            let gender = {};
                            let nation = {};
                            let native_place = {};
                            let major = {};

                            let collage_table=[];
                            let nation_table='';
                            let major_table='';
                            let gender_table='';
                            let native_place_table='';

                            for(let key in data){
                                if(key=='gender'){
                                    gender = data[key]
                                }else if(key=='nation'){
                                    nation = data[key]
                                }else if(key=='native_place'){
                                    native_place = data[key]
                                }else if(key=='major'){
                                    major = data[key]
                                }else if(key=='collage_table'){
                                    collage_table = data[key]
                                }else if(key=='nation_table'){
                                    nation_table = data[key]
                                }else if(key=='native_place_table'){
                                    native_place_table = data[key]
                                }else if(key=='major_table'){
                                    major_table = data[key]
                                }else if(key=='gender_table'){
                                    gender_table = data[key]
                                }

                            }

                            //统计表数据填充
                            //专业名
                            let m_or_c_t = document.getElementById("m_or_c");
                            m_or_c_t.innerHTML= collage_table[0];
                            let m_or_c_name_t = document.getElementById("m_or_c_name");
                            m_or_c_name_t.innerHTML= collage_table[1];

                            //性别填充
                            let gender_t = document.getElementById("gender");
                            gender_t.innerHTML= gender_table;

                            //专业个数
                            let major_count_t = document.getElementById("major_count");
                            major_count_t.innerHTML= major_table;
                            //民族统计
                            let nation_count_t = document.getElementById("nation_count");
                            nation_count_t.innerHTML= nation_table;
                            //籍贯统计
                            let native_p_count_t = document.getElementById("native_p_count");
                            native_p_count_t.innerHTML= native_place_table;

                            //性别统计
                            let  gender_name = [];
                            let gender_count = [];

                             for(let key in gender){
                                 gender_name.push(key);
                                 gender_count.push({'value':gender[key],'name':key});
                             }
                             //民族统计
                            let  naion_name = [];
                            let nation_count = [];

                             for(let key in nation){
                                 naion_name.push(key);
                                 nation_count.push(nation[key]);
                             }

                            //籍贯统计
                            let  native_place_name = [];
                            let native_place_count = [];

                             for(let key in native_place){
                                 native_place_name.push(key);
                                 native_place_count.push(native_place[key]);
                             }
                             //专业统计
                            let  major_name = [];
                            let major_count = [];

                             for(let key in major){
                                 major_name.push(key);
                                 major_count.push(major[key]);
                             }

                                             // 基于准备好的dom，初始化echarts实例
                            var myChart = echarts.init(document.getElementById('piechart-placeholder'));
                            // 基于准备好的dom，初始化echarts实例
                            var myChart2 = echarts.init(document.getElementById('piechart-placeholder-two'));
                            var myChart3 = echarts.init(document.getElementById('piechart-placeholder-tree'));
                            var myChart4 = echarts.init(document.getElementById('piechart-placeholder-foure'));

                            // 指定图表的配置项和数据





                            var option1 = {
                //				图例标题    通过返回数据更改    不写死
                                title: {
                                    text: '男女比例',
                                    // subtext: '纯属虚构',
                                    x: 'center'
                                },
                                tooltip: {
                                    trigger: 'item',
                                    formatter: "{a} <br/>{b} : {c} ({d}%)"
                                },

                                legend: {
                                    orient: 'vertical',
                                    x: 'left',
                //					图例选项  通过返回数据组装更改    不写死
                                    data: gender_name,
                                },
                //
                                calculable: true,
                //				通过返回数据组装更改    不写死
                                series: [{
                                    name: '专业学分',
                                    type: 'pie',
                                    radius: '55%',
                                    center: ['50%', '60%'],
                                    data: gender_count,
                                }]
                            };

                            var option2 = {
                                title: {
                                    text: '专业分布图',
                                    // subtext: '纯属虚构',
                                    x: 'center'
                                },
                                color: ['#3398DB'],
                                tooltip : {
                                    trigger: 'axis',
                                    axisPointer : {            // 坐标轴指示器，坐标轴触发有效
                                        type : 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
                                    }
                                },
                                grid: {
                                    left: '3%',
                                    right: '4%',
                                    bottom: '3%',
                                    containLabel: true
                                },
                                xAxis : [
                                    {
                                        type : 'category',
                                        data : major_name,
                                        axisTick: {
                                            alignWithLabel: true
                                        }
                                    }
                                ],
                                yAxis : [
                                    {
                                        name:'人数',
                                        type : 'value'
                                    }
                                ],
                                series : [
                                    {
                                        name:'人数',
                                        type:'bar',
                                        barWidth: '60%',
                                        data:major_count,
                                    }
                                ]
                            };

                            var option3 = {
                                title: {
                                    text: '民族分布图',
                                    // subtext: '纯属虚构',
                                    x: 'center'
                                },
                                color: ['#3398DB'],
                                tooltip : {
                                    trigger: 'axis',
                                    axisPointer : {            // 坐标轴指示器，坐标轴触发有效
                                        type : 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
                                    }
                                },
                                grid: {
                                    left: '3%',
                                    right: '4%',
                                    bottom: '3%',
                                    containLabel: true
                                },
                                xAxis : [
                                    {
                                        type : 'category',
                                        data : naion_name,
                                        axisTick: {
                                            alignWithLabel: true
                                        }
                                    }
                                ],
                                yAxis : [
                                    {
                                        name:'人数',
                                        type : 'value'
                                    }
                                ],
                                series : [
                                    {
                                        name:'人数',
                                        type:'bar',
                                        barWidth: '60%',
                                        data:nation_count
                                    }
                                ]
                            };

                            var option4 = {
                                title: {
                                    text: '籍贯分布图',
                                    // subtext: '纯属虚构',
                                    x: 'center'
                                },
                                color: ['#3398DB'],
                                tooltip : {
                                    trigger: 'axis',
                                    axisPointer : {            // 坐标轴指示器，坐标轴触发有效
                                        type : 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
                                    }
                                },
                                grid: {
                                    left: '3%',
                                    right: '4%',
                                    bottom: '3%',
                                    containLabel: true
                                },
                                xAxis : [
                                    {
                                        type : 'category',
                                        data : native_place_name,
                                        axisTick: {
                                            alignWithLabel: true
                                        }
                                    }
                                ],
                                yAxis : [
                                    {
                                        name:'人数',
                                        type : 'value'
                                    }
                                ],
                                series : [
                                    {
                                        name:'人数',
                                        type:'bar',
                                        barWidth: '60%',
                                        data:native_place_count,
                                    }
                                ]
                            };

                            // 使用刚指定的配置项和数据显示图表。
                            myChart.setOption(option1);
                            // 使用刚指定的配置项和数据显示图表。
                            myChart2.setOption(option2);
                            myChart3.setOption(option3);
                            myChart4.setOption(option4);
                        },
                        error:function() {
                            alert("服务器端异常!请稍后再试");
                        },
                          });
                   });
              });


        </script>
		<div style="display:none">
			<script src='http://v7.cnzz.com/stat.php?id=155540&web_id=155540' language='JavaScript' charset='gb2312'></script>
		</div>
	</body>
</html>

<script>

	function Close(){
		$(".dlog-box").css({ "display": "none","transition":" all 1s" });
	}
</script>


<script>

$(function(){
  $("#college_1").click(function(){
  alert("test");
  $.ajax({
				url:"{% url 'index' %}",
				data:{"choice":'grade'},
				cache:"false",
				async:"true",
				dataType:"json",
				type:"post",
				success:function(data){

					console.log(data);
				},
				error:function() {
                    alert("服务器端异常");
                },
          });
  });
});
</script>
