<!DOCTYPE html>
<html lang="en">
<head>
    {% load static %}
	<meta charset="utf-8" />
	<title>控制台</title>
	<link href="{% static 'css/admin_css/bootstrap.min.css' %}" rel="stylesheet" />
	<link rel="stylesheet" href="{% static 'css/admin_css/font-awesome.min.css' %}" />
	<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Open+Sans:400,300" />
    <script src="{% static 'js/admin_js/jquery-2.0.3.min.js' %}"></script>
	<link rel="stylesheet" href="{% static 'css/admin_css/ace.min.css' %}" />
	<link rel="stylesheet" href="{% static 'css/admin_css/ace-rtl.min.css' %}" />
	<link rel="stylesheet" href="{% static 'css/admin_css/ace-skins.min.css' %}" />

	<script src="{% static 'js/admin_js/echarts.common.min.js' %}"></script>

	<script src="{% static 'js/admin_js/ace-extra.min.js' %}"></script>

</head>

<body>
<div class="navbar navbar-default" id="navbar">
	<script type="text/javascript">
		try {
			ace.settings.check('navbar', 'fixed')
		} catch (e) {}
	</script>

	<div class="navbar-container" id="navbar-container">
		<div class="navbar-header pull-left">
			<a href="{% url 'admindex' %}" class="navbar-brand">
				<small>
					<i class="icon-leaf"></i>
					学情管理平台
				</small>
			</a><!-- /.brand -->
		</div><!-- /.navbar-header -->

		<div class="navbar-header pull-right" role="navigation">
			<ul class="nav ace-nav">

				<li class="purple">
					<a class="dropdown-toggle" href="../inbox.html">
						<i class="icon-bell-alt icon-animated-bell"></i>
						<span class="badge badge-important">8</span>
					</a>

				</li>


				<li class="light-blue">
					<a data-toggle="dropdown" href="#" class="dropdown-toggle">
						<img class="nav-user-photo" src="{% static 'avatars/user.jpg' %}" alt="Jason's Photo" />
								<span class="user-info">
									<small>欢迎光临,</small>
									Hao
								</span>

						<i class="icon-caret-down"></i>
					</a>

					<ul class="user-menu pull-right dropdown-menu dropdown-yellow dropdown-caret dropdown-close">

						<li>
							<a href="../profile.html">
								<i class="icon-user"></i>
								个人资料
							</a>
						</li>

						<li class="divider"></li>

						<li>
							<a href="../others/login.html">
								<i class="icon-off"></i>
								退出
							</a>
						</li>
					</ul>
				</li>
			</ul><!-- /.ace-nav -->
		</div><!-- /.navbar-header -->
	</div><!-- /.container -->
</div>

<div class="main-container" id="main-container">
	<script type="text/javascript">
		try {
			ace.settings.check('main-container', 'fixed')
		} catch (e) {}
	</script>

	<div class="main-container-inner">
		<a class="menu-toggler" id="menu-toggler" href="#">
			<span class="menu-text"></span>
		</a>

		<div class="sidebar" id="sidebar">
			<script type="text/javascript">
				try {
					ace.settings.check('sidebar', 'fixed')
				} catch (e) {}
			</script>

			<div class="sidebar-shortcuts" id="sidebar-shortcuts">
				<!-- <div class="sidebar-shortcuts-large" id="sidebar-shortcuts-large">
                    <button class="btn btn-success">
                        <i class="icon-signal"></i>
                    </button>

                    <button class="btn btn-info">
                        <i class="icon-pencil"></i>
                    </button>

                    <button class="btn btn-warning">
                        <i class="icon-group"></i>
                    </button>

                    <button class="btn btn-danger">
                        <i class="icon-cogs"></i>
                    </button>
                </div> -->

				<div class="sidebar-shortcuts-mini" id="sidebar-shortcuts-mini">
					<span class="btn btn-success"></span>

					<span class="btn btn-info"></span>

					<span class="btn btn-warning"></span>

					<span class="btn btn-danger"></span>
				</div>
			</div><!-- #sidebar-shortcuts -->

			<ul class="nav nav-list">
						<li class="active">
							<a href="{% url 'admindex' %}">
								<i class="icon-dashboard"></i>
								<span class="menu-text"> 学情管理控制台 </span>
							</a>
						</li>


						<li class="active">
							<a href="{% url 'admindex' %}">
								<i class="icon-dashboard"></i>
								<span class="menu-text"> 主页 </span>
							</a>
						</li>
						<li>
							<a href="#">
								<i class="icon-list"></i>
								<span class="menu-text"> 毕业审核 </span>
							</a>
						</li>
						<li>
							<a href="{% url 'st_like' %}" class="dropdown-toggle">
								<i class="icon-list"></i>
								<span class="menu-text"> 学情分析 </span>

							</a>

						</li>
						<li>
							<a href="{% url 'warm' %}" class="dropdown-toggle">
								<i class="icon-list"></i>
								<span class="menu-text"> 学情预警 </span>

							</a>
						</li>
						<li>
							<a href="{% url 'admcred' %}">
								<i class="icon-list"></i>
								<span class="menu-text"> 学分管理 </span>
							</a>
						</li>

						<li>
							<a href="{% url 'hplan' %}" class="dropdown-toggle">
								<i class="icon-list"></i>
								<span class="menu-text"> 助学进度 </span>

							</a>

						</li>
						<li>
							<a href="{% url 'adduser' %}" class="dropdown-toggle">
								<i class="icon-list"></i>
								<span class="menu-text"> 添加用户 </span>
							</a>

						</li>
						<li>
							<a href="{% url 'assit' %}" class="dropdown-toggle">
								<i class="icon-list"></i>
								<span class="menu-text"> 帮扶计划 </span>

							</a>

						</li>

						<li>
							<a href="{% url 'tj' %}" class="dropdown-toggle">
								<i class="icon-list"></i>
								<span class="menu-text"> 统计分析 </span>

							</a>

						</li>

						<li>
							<a href="{% url 'associate' %}" class="dropdown-toggle">
								<i class="icon-list"></i>
								<span class="menu-text"> 关联分析 </span>

							</a>

						</li>

					</ul>

			<div class="sidebar-collapse" id="sidebar-collapse">
				<i class="icon-double-angle-left" data-icon1="icon-double-angle-left" data-icon2="icon-double-angle-right"></i>
			</div>

			<script type="text/javascript">
				try {
					ace.settings.check('sidebar', 'collapsed')
				} catch (e) {}
			</script>
		</div>

		<div class="main-content">
			<div class="breadcrumbs" id="breadcrumbs">
				<script type="text/javascript">
					try {
						ace.settings.check('breadcrumbs', 'fixed')
					} catch (e) {}
				</script>

				<ul class="breadcrumb">
					<li>
						<i class="icon-home home-icon"></i>
						<a href="{% url 'admindex' %}">主页</a>
					</li>

					<li>
						<a href="#" >帮扶计划</a>
					</li>
				</ul><!-- .breadcrumb -->

				<div class="nav-search" id="nav-search">
					<form class="form-search">
								<span class="input-icon">
									<input type="text" placeholder="Search ..." class="nav-search-input" id="nav-search-input" autocomplete="off" />
									<i class="icon-search nav-search-icon"></i>
								</span>
					</form>
				</div><!-- #nav-search -->
			</div>

			<div class="page-content">


				<div class="row">
					<div class="col-xs-12">
						<!-- PAGE CONTENT BEGINS -->


						<div class="row-fluid">
							<div class="span12">
								<div class="widget-box">
									<div class="widget-header widget-header-blue widget-header-flat">
										<h4 class="lighter">帮扶计划</h4>
									</div>

									<div class="widget-body">
										<div class="widget-main">
											<div class="step-content row-fluid position-relative" id="step-container">
												<div class="step-pane active" id="step1">
													<div class="modal-body no-padding">
														<table class="table table-striped table-bordered table-hover no-margin-bottom no-border-top">
															<thead>
															<tr>
																<th>姓名</th>
																<th>学号</th>
																<th>专业</th>
																<th>班级</th>
																<th>预警等级</th>
																<th width="300">选择帮扶老师</th>
                                                                <th>操作</th>
															</tr>
															</thead>

															<tbody>
                                                            {% for foo in all_student %}
                                                                <tr>
																	<td>
																		<a href="#">{{ foo.name }}</a>
																	</td>
																	<td>{{ foo.st_id }}</td>
																	<td>{{ foo.major }}</td>
																	<td>{{ foo.myclass }}</td>
																	<td>{{ foo.level }}</td>
                                                                    {% if foo.assit_teacher %}
                                                                        <td id="assit">{{ foo.assit_teacher }}</td>
                                                                    {% else %}
                                                                        <td width="70">
                                                                        <div id="{{ foo.st_id }}" class="widget-toolbar no-border">
                                                                        <button class="btn btn-minier btn-primary dropdown-toggle" data-toggle="dropdown">
                                                                            选择

                                                                            <i class="icon-angle-down icon-on-right bigger-110"></i>
                                                                        </button>

                                                                        <ul  class="dropdown-menu pull-right dropdown-125 dropdown-lighter dropdown-caret">
                                                                            {% for foo_t in all_teacher %}
                                                                                 <li class="active">
                                                                                    <a href="#" class="blue" data-value="{{ foo.st_id }}">
                                                                                        <i class="icon-caret-right bigger-110">&nbsp;</i>
                                                                                        {{ foo_t.name }}
                                                                                    </a>
                                                                                </li>
                                                                            {% endfor %}



                                                                        </ul>
                                                                    </div>
                                                                    </td>

                                                                    {% endif %}
                                                                    <td>
                                                                        <div id="cancel">
                                                                            <button  id="{{ foo.st_id }}">取消</button>
                                                                        </div>
                                                                    </td>


																</tr>
                                                                {% csrf_token %}
                                                            {% endfor %}


															</tbody>
														</table>
													</div>


												</div>




											</div>


										</div><!-- /widget-main -->
									</div><!-- /widget-body -->
								</div>
							</div>
						</div>

						<div id="modal-wizard" class="modal">
							<div class="modal-dialog">
								<div class="modal-content">
									<div class="modal-header" data-target="#modal-step-contents">
										<ul class="wizard-steps">
											<li data-target="#modal-step1" class="active">
												<span class="step">1</span>
												<span class="title">Validation states</span>
											</li>

											<li data-target="#modal-step2">
												<span class="step">2</span>
												<span class="title">Alerts</span>
											</li>

											<li data-target="#modal-step3">
												<span class="step">3</span>
												<span class="title">Payment Info</span>
											</li>

											<li data-target="#modal-step4">
												<span class="step">4</span>
												<span class="title">Other Info</span>
											</li>
										</ul>
									</div>

									<div class="modal-body step-content" id="modal-step-contents">
										<div class="step-pane active" id="modal-step1">
											<div class="center">
												<h4 class="blue">Step 1</h4>
											</div>
										</div>

										<div class="step-pane" id="modal-step2">
											<div class="center">
												<h4 class="blue">Step 2</h4>
											</div>
										</div>

										<div class="step-pane" id="modal-step3">
											<div class="center">
												<h4 class="blue">Step 3</h4>
											</div>
										</div>

										<div class="step-pane" id="modal-step4">
											<div class="center">
												<h4 class="blue">Step 4</h4>
											</div>
										</div>
									</div>

									<div class="modal-footer wizard-actions">
										<button class="btn btn-sm btn-prev">
											<i class="icon-arrow-left"></i>
											Prev
										</button>
										<button class="btn btn-success btn-sm btn-next" data-last="Finish ">
											Next
											<i class="icon-arrow-right icon-on-right"></i>
										</button>

										<button class="btn btn-danger btn-sm pull-left" data-dismiss="modal">
											<i class="icon-remove"></i>
											Cancel
										</button>
									</div>
								</div>
							</div>
						</div><!-- PAGE CONTENT ENDS -->
					</div><!-- /.col -->
				</div><!-- /.row -->
			</div><!-- /.page-content -->
		</div><!-- /.main-content -->

		<div class="ace-settings-container" id="ace-settings-container">
			<div class="btn btn-app btn-xs btn-warning ace-settings-btn" id="ace-settings-btn">
				<i class="icon-cog bigger-150"></i>
			</div>

			<div class="ace-settings-box" id="ace-settings-box">
				<div>
					<div class="pull-left">
						<select id="skin-colorpicker" class="hide">
							<option data-skin="default" value="#438EB9">#438EB9</option>
							<option data-skin="skin-1" value="#222A2D">#222A2D</option>
							<option data-skin="skin-2" value="#C6487E">#C6487E</option>
							<option data-skin="skin-3" value="#D0D0D0">#D0D0D0</option>
						</select>
					</div>
					<span>&nbsp; 选择皮肤</span>
				</div>

				<div>
					<input type="checkbox" class="ace ace-checkbox-2" id="ace-settings-navbar" />
					<label class="lbl" for="ace-settings-navbar"> 固定导航条</label>
				</div>

				<div>
					<input type="checkbox" class="ace ace-checkbox-2" id="ace-settings-sidebar" />
					<label class="lbl" for="ace-settings-sidebar"> 固定滑动条</label>
				</div>

				<div>
					<input type="checkbox" class="ace ace-checkbox-2" id="ace-settings-breadcrumbs" />
					<label class="lbl" for="ace-settings-breadcrumbs">固定面包屑</label>
				</div>

				<div>
					<input type="checkbox" class="ace ace-checkbox-2" id="ace-settings-rtl" />
					<label class="lbl" for="ace-settings-rtl">切换到左边</label>
				</div>

				<div>
					<input type="checkbox" class="ace ace-checkbox-2" id="ace-settings-add-container" />
					<label class="lbl" for="ace-settings-add-container">
						切换窄屏
						<b></b>
					</label>
				</div>
			</div>
		</div><!-- /#ace-settings-container -->

	</div><!-- /.main-container-inner -->

	<a href="#" id="btn-scroll-up" class="btn-scroll-up btn btn-sm btn-inverse">
		<i class="icon-double-angle-up icon-only bigger-110"></i>
	</a>
</div><!-- /.main-container -->


<script src="{% static 'js/admin_js/jquery-2.0.3.min.js' %}"></script>


<!--[if IE]>
<script src="{% static 'js/admin_js/jquery-1.10.2.min.js' %}"></script>
<![endif]-->

<!--[if !IE]> -->

<script type="text/javascript">
	window.jQuery || document.write("<script src='{% static 'js/admin_js/jquery-2.0.3.min.js' %}'>" + "<" + "script>");
</script>

<!-- <![endif]-->

<!--[if IE]>
<script type="text/javascript">
	window.jQuery || document.write("<script src='{% static 'js/admin_js/jquery-1.10.2.min.js' %}'>"+"<"+"script>");
</script>
<![endif]-->

<script type="text/javascript">
	if ("ontouchend" in document) document.write("<script src='{% static 'js/admin_js/jquery.mobile.custom.min.js' %}'>" + "<" +
			"script>");
</script>
<script src="{% static 'js/admin_js/bootstrap.min.js' %}"></script>
<script src="{% static 'js/admin_js/typeahead-bs2.min.js' %}"></script>

<!-- page specific plugin scripts -->

<!--[if lte IE 8]>
<script src="{% static 'js/admin_js/excanvas.min.js' %}"></script>
<![endif]-->
<script src="{% static 'js/admin_js/jquery.ui.touch-punch.min.js' %}"></script>
<script src="{% static 'js/admin_js/jquery-ui-1.10.3.custom.min.js' %}"></script>
<script src="{% static 'js/admin_js/jquery.ui.touch-punch.min.js' %}"></script>
<script src="{% static 'js/admin_js/jquery.slimscroll.min.js' %}"></script>
<script src="{% static 'js/admin_js/jquery.easy-pie-chart.min.js' %}"></script>
<script src="{% static 'js/admin_js/jquery.sparkline.min.js' %}"></script>
<script src="{% static 'js/admin_js/flot/jquery.flot.min.js' %}"></script>
<script src="{% static 'js/admin_js/flot/jquery.flot.pie.min.js' %}"></script>
<script src="{% static 'js/admin_js/flot/jquery.flot.resize.min.js' %}"></script>
<!-- ace scripts -->

<script src="{% static 'js/admin_js/ace-elements.min.js' %}"></script>
<script src="{% static 'js/admin_js/ace.min.js' %}"></script>




<script>

    $(function(){
    {# 专业 #}
             $(" li a").click(function(){
              let selectValue = $(this).text();
              let st_id = $(this).attr('data-value');
              console.log(st_id);
              console.log(selectValue);
              let data_id ="#"+st_id;

              var htmls = '';
              htmls+="<td>"+selectValue+"</td>";
              $(data_id).html(htmls);
              document.getElementById(st_id).style.display="";
              $.ajax({
                        url:"{% url 'assitch' %}",
                        data:{"option":0,"st_id":st_id,"teacher":selectValue,'csrfmiddlewaretoken':$('[name="csrfmiddlewaretoken"]').val()},
                        cache:"false",
                        async:"true",
                        dataType:"json",
                        type:"post",
                        success:function(data){
                            //data是json类型
                        },
                        error:function() {
                            alert("服务器端异常!请稍后再试，添加");
                        },
                          });
          });
  });

    $(function(){
         $("#cancel button").click(function(){
             let st_id = $(this).attr('id');
            $.ajax({
                        url:"{% url 'assitch' %}",
                        data:{"option":1,"st_id":st_id,'csrfmiddlewaretoken':$('[name="csrfmiddlewaretoken"]').val()},
                        cache:"false",
                        async:"true",
                        dataType:"json",
                        type:"post",
                        success:function(data){
                            //data是json类型
                            window.location.reload();
                        },
                        error:function() {
                            alert("服务器端异常!请稍后再试,取消");
                        },
                          });
          });

         });


</script>


<div style="display:none">
	<script src='http://v7.cnzz.com/stat.php?id=155540&web_id=155540' language='JavaScript' charset='gb2312'></script>
</div>
</body>
</html>
